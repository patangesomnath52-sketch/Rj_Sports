<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Login | RJ Sports</title>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script>
        // Professional Auth Check: ‡§ú‡§∞ ‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§Ü‡§ß‡•Ä‡§ö ‡§≤‡•â‡§ó‡•Ä‡§® ‡§Ö‡§∏‡•á‡§≤, ‡§§‡§∞ ‡§§‡•ç‡§Ø‡§æ‡§≤‡§æ ‡§•‡•á‡§ü ‡§π‡•ã‡§Æ ‡§™‡•á‡§ú‡§µ‡§∞ ‡§´‡•á‡§ï‡§æ!
        if(localStorage.getItem('rj_loggedInUser')) {
            window.location.replace('index.html');
        }
    </script>
    <style>
        /* --- UNIVERSAL DARK/LIGHT MODE STYLES --- */
        :root {
            --bg-color: #f4f6f8;
            --text-color: #1f2937;
            --header-bg: #fff;
            --card-bg: #fff; /* ‡§™‡•ç‡§∞‡•â‡§°‡§ï‡•ç‡§ü‡•ç‡§∏ ‡§Ü‡§£‡§ø ‡§ï‡§æ‡§∞‡•ç‡§ü‡§ö‡•ç‡§Ø‡§æ ‡§™‡§æ‡§Ç‡§¢‡§±‡•ç‡§Ø‡§æ ‡§¨‡•â‡§ï‡•ç‡§∏‡§∏‡§æ‡§†‡•Ä */
            --border-color: #e5e7eb;
            --accent: #ff3f6c;
        }
        body.dark-mode {
            --bg-color: #121212;
            --text-color: #e5e7eb;
            --header-bg: #1f2937;
            --card-bg: #1e293b; /* ‡§°‡§æ‡§∞‡•ç‡§ï ‡§Æ‡•ã‡§° ‡§Æ‡§ß‡•Ä‡§≤ ‡§ï‡§æ‡§∞‡•ç‡§°‡•ç‡§∏‡§ö‡§æ ‡§∞‡§Ç‡§ó */
            --border-color: #374151;
        }
        
        body { background-color: var(--bg-color); color: var(--text-color); transition: background 0.3s, color 0.3s; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Assistant', sans-serif; }
        body { background-color: #f4f6f8; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
        
        .auth-container { background: #fff; padding: 40px; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.08); width: 100%; max-width: 400px; text-align: center; }
        .logo { font-size: 28px; font-weight: 800; text-decoration: none; color: #282c3f; display: block; margin-bottom: 30px; }
        .logo span { color: #ff3f6c; }

        .google-btn { background: #fff; color: #333; border: 1px solid #d4d5d9; padding: 14px; font-size: 16px; font-weight: 600; border-radius: 6px; cursor: pointer; width: 100%; display: flex; align-items: center; justify-content: center; gap: 10px; transition: 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .google-btn:hover { background: #f9f9f9; border-color: #b0b0b0; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .google-btn img { width: 22px; }

        /* Error message styling */
        #debug-error { color: #d32f2f; background: #ffebee; padding: 10px; border-radius: 4px; font-size: 13px; margin-top: 20px; display: none; font-weight: 600; text-align: left; }
        
        @media (max-width: 768px) { .auth-container { padding: 30px 20px; } }
    </style>

</head>
<body>

<div class="auth-container">
    <a href="index.html" class="logo">RJ <span>SPORTS</span></a>
    <h2 style="margin-bottom: 10px; color: #333;">Welcome Back</h2>
    <p style="color: #666; font-size: 14px; margin-bottom: 25px;">Sign in to access your orders and fast checkout.</p>
    
    <button id="google-btn" class="google-btn">
        <img src="logo.google.png" alt="Google">
        Continue with Google
    </button>

    <div id="debug-error"></div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";

    // üî¥ YOU MUST REPLACE THESE VALUES WITH YOUR REAL FIREBASE KEYS üî¥
    const firebaseConfig = {
        apiKey: "AIzaSyBxyUiyy0L_hDuWul8SrntOtYgI48IiUPQ",
    authDomain: "rj-sports-24dae.firebaseapp.com",
    projectId: "rj-sports-24dae",
    storageBucket: "rj-sports-24dae.firebasestorage.app",
    messagingSenderId: "952774877656",
    appId: "1:952774877656:web:aee2f70e14daeb07e912ad"
    };

    // Initialize Firebase
    let app, auth, provider;
    try {
        app = initializeApp(firebaseConfig);
        auth = getAuth(app);
        provider = new GoogleAuthProvider();
    } catch (e) {
        showError("Firebase Setup Error: Check your firebaseConfig keys.");
    }

    function showError(msg) {
        const errDiv = document.getElementById('debug-error');
        errDiv.innerText = msg;
        errDiv.style.display = 'block';
    }

    document.getElementById('google-btn').addEventListener('click', async () => {
        const btn = document.getElementById('google-btn');
        const originalText = btn.innerHTML;
        btn.innerHTML = "Connecting to Google...";
        btn.disabled = true;
        document.getElementById('debug-error').style.display = 'none';

        try {
            // Standard Popup Auth (Used by many top sites for cross-origin stability)
            const result = await signInWithPopup(auth, provider);
            
            // Save user data & redirect seamlessly
            localStorage.setItem('rj_loggedInUser', result.user.displayName);
            localStorage.setItem('rj_userEmail', result.user.email);
            window.location.href = 'index.html';
        } catch (error) {
            console.error("Auth Error:", error);
            showError(`Error Code: ${error.code} \nMessage: ${error.message}`);
            btn.innerHTML = originalText;
            btn.disabled = false;
        }
    });
</script>
</body>
</html>